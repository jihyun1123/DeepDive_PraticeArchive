DeepDive ë¶€íŠ¸ìº í”„ ì‹¤ìŠµ ê³¼ì œë¬¼ ëª¨ìŒ
1. ì‹¤ì‹œê°„ ì±„íŒ… íŽ˜ì´ì§€
  - ê°•ì‚¬ë‹˜ì´ ì£¼ì‹  API ëª…ì„¸ì„œ ë°”íƒ•

2. ë””ë°”ìš´ì‹±ì„ í™œìš©í•œ ë„ì„œ ê²€ìƒ‰
  - ì¼ì • ì‹œê°„ ë™ì•ˆ ì´ë²¤íŠ¸ê°€ ë” ì•ˆ ë“¤ì–´ì˜¬ ë•Œ, ë§ˆì§€ë§‰ í•œ ë²ˆë§Œ ì‹¤í–‰
  - ê°•ì‚¬ë‹˜ì´ ì£¼ì‹  API ëª…ì„¸ì„œ ë°”íƒ•



  # ðŸ”Œ ì±„íŒ…ë°© API ëª…ì„¸

> **ì„œë²„ ì£¼ì†Œ**: `http://54.180.25.65:3030`  
> **Swagger ë¬¸ì„œ**: `http://54.180.25.65:3030/swagger/index.html`

---

## âš ï¸ Rate Limit

- **ì œí•œ**: ë¶„ë‹¹ 60íšŒ
- **ì´ˆê³¼ ì‹œ**: 3ë¶„ê°„ ì°¨ë‹¨ (HTTP 429 ë°˜í™˜)

---

## 1. ë©”ì‹œì§€ ëª©ë¡ ì¡°íšŒ

ì±„íŒ… ë©”ì‹œì§€ ëª©ë¡ì„ ì¡°íšŒí•©ë‹ˆë‹¤.

```
GET /api/messages
```

**Query Parameters:**

| íŒŒë¼ë¯¸í„° | íƒ€ìž… | í•„ìˆ˜ | ê¸°ë³¸ê°’ | ì„¤ëª… |
|---------|------|------|-------|------|
| `limit` | int | X | 50 | ê°€ì ¸ì˜¬ ë©”ì‹œì§€ ìˆ˜ (ìµœëŒ€ 100) |
| `before` | int | X | - | ì´ IDë³´ë‹¤ ì´ì „ ë©”ì‹œì§€ ì¡°íšŒ (íŽ˜ì´ì§€ë„¤ì´ì…˜ìš©) |

**ìš”ì²­ ì˜ˆì‹œ:**
```
GET /api/messages?limit=20
GET /api/messages?limit=20&before=50
```

**ì‘ë‹µ ì˜ˆì‹œ:**
```json
{
  "success": true,
  "data": [
    {
      "id": 2,
      "nickname": "ì˜í¬",
      "content": "ë°˜ê°‘ìŠµë‹ˆë‹¤~",
      "createdAt": "2024-01-15T10:30:05.000Z"
    },
    {
      "id": 1,
      "nickname": "ì² ìˆ˜",
      "content": "ì•ˆë…•í•˜ì„¸ìš”!",
      "createdAt": "2024-01-15T10:30:00.000Z"
    }
  ],
  "meta": {
    "total": 2,
    "hasMore": false
  }
}
```

---

## 2. ë©”ì‹œì§€ ì „ì†¡

ìƒˆë¡œìš´ ì±„íŒ… ë©”ì‹œì§€ë¥¼ ì „ì†¡í•©ë‹ˆë‹¤.

```
POST /api/messages
Content-Type: application/json
```

**Request Body:**

| í•„ë“œ | íƒ€ìž… | í•„ìˆ˜ | ì œí•œ | ì„¤ëª… |
|-----|------|------|-----|------|
| `nickname` | string | O | 2~20ìž | ìž‘ì„±ìž ë‹‰ë„¤ìž„ |
| `content` | string | O | 1~500ìž | ë©”ì‹œì§€ ë‚´ìš© |

**ìš”ì²­ ì˜ˆì‹œ:**
```json
{
  "nickname": "ì² ìˆ˜",
  "content": "ì•ˆë…•í•˜ì„¸ìš”!"
}
```

**ì„±ê³µ ì‘ë‹µ (201):**
```json
{
  "success": true,
  "data": {
    "id": 3,
    "nickname": "ì² ìˆ˜",
    "content": "ì•ˆë…•í•˜ì„¸ìš”!",
    "createdAt": "2024-01-15T10:31:00.000Z"
  }
}
```

**ì‹¤íŒ¨ ì‘ë‹µ (400):**
```json
{
  "success": false,
  "error": {
    "code": "VALIDATION_ERROR",
    "message": "ë‹‰ë„¤ìž„ì€ 2~20ìžì—¬ì•¼ í•©ë‹ˆë‹¤."
  }
}
```

---

## 3. ë©”ì‹œì§€ ì‚­ì œ

ë³¸ì¸ì´ ìž‘ì„±í•œ ë©”ì‹œì§€ë¥¼ ì‚­ì œí•©ë‹ˆë‹¤.

```
DELETE /api/messages/:id?nickname=ë‹‰ë„¤ìž„
```

**Path Parameters:**

| íŒŒë¼ë¯¸í„° | íƒ€ìž… | í•„ìˆ˜ | ì„¤ëª… |
|---------|------|------|------|
| `id` | int | O | ì‚­ì œí•  ë©”ì‹œì§€ ID |

**Query Parameters:**

| íŒŒë¼ë¯¸í„° | íƒ€ìž… | í•„ìˆ˜ | ì„¤ëª… |
|---------|------|------|------|
| `nickname` | string | O | ìž‘ì„±ìž ë‹‰ë„¤ìž„ (ë³¸ì¸ í™•ì¸ìš©) |

**ìš”ì²­ ì˜ˆì‹œ:**
```
DELETE /api/messages/3?nickname=ì² ìˆ˜
```

**ì„±ê³µ ì‘ë‹µ (200):**
```json
{
  "success": true,
  "message": "ë©”ì‹œì§€ê°€ ì‚­ì œë˜ì—ˆìŠµë‹ˆë‹¤."
}
```

**ì‹¤íŒ¨ ì‘ë‹µ:**

- **403 Forbidden** - ë³¸ì¸ ë©”ì‹œì§€ê°€ ì•„ë‹Œ ê²½ìš°
```json
{
  "success": false,
  "error": {
    "code": "FORBIDDEN",
    "message": "ë³¸ì¸ì˜ ë©”ì‹œì§€ë§Œ ì‚­ì œí•  ìˆ˜ ìžˆìŠµë‹ˆë‹¤."
  }
}
```

- **404 Not Found** - ë©”ì‹œì§€ê°€ ì—†ëŠ” ê²½ìš°
```json
{
  "success": false,
  "error": {
    "code": "NOT_FOUND",
    "message": "ë©”ì‹œì§€ë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤."
  }
}
```

---

## 4. ìƒˆ ë©”ì‹œì§€ ì¡°íšŒ (í´ë§ìš©)

íŠ¹ì • ID ì´í›„ì˜ ìƒˆë¡œìš´ ë©”ì‹œì§€ë§Œ ì¡°íšŒí•©ë‹ˆë‹¤.  
**ì‹¤ì‹œê°„ ì±„íŒ… êµ¬í˜„ ì‹œ í´ë§(polling)ì— ì‚¬ìš©í•©ë‹ˆë‹¤.**

```
GET /api/messages/new?after=ë§ˆì§€ë§‰ID
```

**Query Parameters:**

| íŒŒë¼ë¯¸í„° | íƒ€ìž… | í•„ìˆ˜ | ì„¤ëª… |
|---------|------|------|------|
| `after` | int | O | ì´ ID ì´í›„ì˜ ë©”ì‹œì§€ë§Œ ì¡°íšŒ |

**ìš”ì²­ ì˜ˆì‹œ:**
```
GET /api/messages/new?after=5
```

**ì‘ë‹µ ì˜ˆì‹œ:**
```json
{
  "success": true,
  "data": [
    {
      "id": 6,
      "nickname": "ë¯¼ìˆ˜",
      "content": "ìƒˆ ë©”ì‹œì§€ìž…ë‹ˆë‹¤!",
      "createdAt": "2024-01-15T10:35:00.000Z"
    }
  ],
  "meta": {
    "count": 1
  }
}
```

---

## 5. í†µê³„ ì¡°íšŒ

ì±„íŒ…ë°© í†µê³„ ì •ë³´ë¥¼ ì¡°íšŒí•©ë‹ˆë‹¤.

```
GET /api/messages/stats
```

**ì‘ë‹µ ì˜ˆì‹œ:**
```json
{
  "success": true,
  "data": {
    "totalMessages": 150,
    "activeUsers": 5,
    "recentUsers": ["ì² ìˆ˜", "ì˜í¬", "ë¯¼ìˆ˜"]
  }
}
```

---

## ðŸ“‹ ì—ëŸ¬ ì½”ë“œ ì •ë¦¬

| ì½”ë“œ | HTTP ìƒíƒœ | ì„¤ëª… |
|-----|----------|------|
| `VALIDATION_ERROR` | 400 | ìš”ì²­ ë°ì´í„° ìœ íš¨ì„± ê²€ì‚¬ ì‹¤íŒ¨ |
| `NOT_FOUND` | 404 | ë¦¬ì†ŒìŠ¤ë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŒ |
| `FORBIDDEN` | 403 | ê¶Œí•œ ì—†ìŒ |
| `RATE_LIMITED` | 429 | ìš”ì²­ ì œí•œ ì´ˆê³¼ |

---

## ðŸ’¡ ì‹¤ì‹œê°„ ì±„íŒ… êµ¬í˜„ íŒ

```javascript
// í´ë§ ë°©ì‹ ì˜ˆì‹œ
let lastMessageId = 0;

// 1. ì´ˆê¸° ë©”ì‹œì§€ ë¡œë“œ
const response = await fetch('/api/messages');
const data = await response.json();
lastMessageId = data.data[0]?.id || 0;

// 2. ì£¼ê¸°ì ìœ¼ë¡œ ìƒˆ ë©”ì‹œì§€ í™•ì¸ (2ì´ˆë§ˆë‹¤)
setInterval(async () => {
  const res = await fetch(`/api/messages/new?after=${lastMessageId}`);
  const newData = await res.json();
  
  if (newData.data.length > 0) {
    // ìƒˆ ë©”ì‹œì§€ ì²˜ë¦¬
    lastMessageId = newData.data[newData.data.length - 1].id;
  }
}, 2000);
```
